{% extends "base.html" %}
{% load version %}

{% block title %}Usuário: {{usuario}}{% endblock %}

{% block content %}
<div class="card cardEspecial">
	<div class="card-header bg-dark text-white">
		{% if usuario == user %}
		<h1>Meu Perfil</h1>
		{% else %}
		<h1>Perfil do Usuário: {{usuario.username}}</h1>
		{% endif %}
	</div>
	<div class="card-body">
		<div class="pure-u-1">
			<ul class="breadcrumb">
				{% block breadcrumb %}
				<li><a href="{% url 'usuario' usuario.pk %}">Meu Painel</a></li>
				{% endblock %}
			</ul>
		</div>
		<div>
			{% block dashboard_content %}
				<div class="card">
					<div class="card-header bg-dark text-white">
						{% if usuario == user %}
						Minhas turmas
						{% else %}
						Turmas
						{% endif %}
					</div>
					<div class="card-body">
						<div class="table-responsive">
							<table class="table">
								<thead class="bg-dark text-white">
									<tr>
										<th scope="col">Turma</th>
										<th scope="col" style="width: 20%">Opções</th>
									</tr>
								</thead>
								<tbody>
								{% if usuario.user_type == 'ALUNO' %}
									{% for matricula in matriculas %}
										<tr>
											<td><a href="{% url 'turma' matricula.turma_id.pk %}">{{ matricula.turma_id }}</a></td>
											<td><a href="{% url 'desmatricular' matricula.turma_id.pk %}" class="btn btn-danger">Desinscrever-se</a></td>
										</tr>
									{% empty %}
										<tr>
											<td>Nenhuma turma disponível...</td>
										</tr>
									{% endfor %}
								{% else %}
									{% for turma in turmas %}
										<tr>
											<td><a href="{% url 'turma' turma.pk %}">{{ turma }}</a></td>
											<td><a href="{% url 'excluir_turma' turma.pk %}" class="btn btn-danger">Excluir Turma</a></td>
										</tr>
									{% empty %}
										<tr>
											<td>Nenhuma Turma disponível</td>
										</tr>
									{% endfor %}
								{% endif %}
							  </tbody>
							</table>
						</div>
					</div>
				</div>
				{% if usuario.user_type == 'ALUNO' %}
				<div class="card">
					<div class="card-header bg-dark text-white">
						Exercícios
					</div>
					<div class="card-body">
						<div class="table-responsive">
							<table class="table">
								<thead class="bg-dark text-white">
									<tr>
										<th scope="col">Tema</th>
										<th scope="col">Exercício</th>
										<th scope="col">&#10003;</th>
										<th scope="col">&#10005;</th>
									</tr>
								</thead>
								<tbody>
									
									{% for aluno_exercicio in aluno_exercicios %}
										<tr>
											<td>{{aluno_exercicio.exercicio_id.tema_id}}</td>
											<td>{{aluno_exercicio.exercicio_id}}</td>
											<td>{{aluno_exercicio.corrects}}</td>
											<td>{{aluno_exercicio.wrongs}}</td>
										</tr>
									{% empty %}
										<tr>
											<td>Nenhum exercício disponível...</td>
										</tr>
									{% endfor %}
							  </tbody>
							</table>
						</div>
					</div>
				</div>
				{% endif %}
				{% if usuario == user %}
				<form action="{% url 'editar_usuario' %}" style="display:inline-block;">
					<input type="submit" value="Editar usuário" class="btn btn-dark"/>
				</form>
				<form action="{% url 'editar_senha' %}" style="display:inline-block;">
					<input type="submit" value="Editar senha" class="btn btn-dark"/>
				</form>
				{% endif %}
			{% endblock %}
		</div>
	</div>
</div>
{% endblock %}