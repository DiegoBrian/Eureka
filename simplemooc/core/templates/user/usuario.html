{% extends "base.html" %}
{% load version %}

{% block title %}Usuário: {{user}}{% endblock %}

{% block content %}
<div class="card cardEspecial">
	<div class="card-header bg-dark text-white">
		Perfil do Usuário
	</div>
	<div class="card-body">
		<div class="pure-u-1">
			<ul class="breadcrumb">
				{% block breadcrumb %}
				<li><a href="{% url 'usuario' %}">Meu Painel</a></li>
				{% endblock %}
			</ul>
		</div>
		<div>
			{% block dashboard_content %}
				<div class="card">
					<div class="card-header bg-dark text-white">
						Dados pessoais
					</div>
					
					<div class="card-body">
						{% if user.image %}
						<img src="{{ user.image.url }}"style=" width: 150px; height: 170px; margin-right: 10px;" class="img-fluid" align="left">
						{% else %}
						<img src="https://www.cisidat.org.mx/home/wp-content/uploads/2016/10/no-user.jpg" style="max-width:150px; margin-right: 10px;" class="img-fluid" align="left">
						{% endif %}
						<p>Nome de usuário: {{user.username}}<br>
						Nome: {{user.name}}<br>
						Email: {{user.email}}<br>
						Sexo: {{user.gender}}<br>
						Data de Nascimento: {{user.birth_date}}<br>
						{% if user.user_type == 'ALUNO' %}
						Série: {{user.grade}}º ano<br></p>
						{% endif %}
					</div>
				</div>
				<div class="card cardEspecial">
					<div class="card-header bg-dark text-white">
						Minhas turmas
					</div>
					<div class="card-body">
						<div class="table-responsive">
							<table class="table">
								<thead class="bg-dark text-white">
									<tr>
										<th scope="col">Turma</th>
										<th scope="col" style="width: 20%">Opções</th>
									</tr>
								</thead>
								<tbody>
								{% if user.user_type == 'ALUNO' %}
									{% load_my_courses user as matriculas %}
									{% for matricula in matriculas %}
										<tr>
											<td><a href="{% url 'turma' matricula.turma_id.pk %}">{{ matricula.turma_id }}</a></td>
											<td><a href="{% url 'desmatricular' matricula.turma_id.pk %}" class="btn btn-danger">Desinscrever-se</a></td>
										</tr>
									{% empty %}
										<tr>
											<td>Nenhuma turma disponível...</td>
										</tr>
									{% endfor %}
								{% else %}
									{% for turma in turmas %}
										<tr>
											<td><a href="{% url 'turma' turma.pk %}">{{ turma }}</a></td>
											<td><a href="{% url 'excluir_turma' turma.pk %}" class="btn btn-danger">Excluir Turma</a></td>
										</tr>
									{% empty %}
										<tr>
											<td>Nenhuma Turma disponível</td>
										</tr>
									{% endfor %}
								{% endif %}
							  </tbody>
							</table>
						</div>
					</div>
				</div>

				{% if user.user_type == 'ALUNO' %}
				<div class="card cardEspecial">
					<div class="card-header bg-dark text-white">
						Exercícios
					</div>
					<div class="card-body">
						<div class="table-responsive">
							<table class="table">
								<thead class="bg-dark text-white">
									<tr>
										<th scope="col">Tema</th>
										<th scope="col">Exercício</th>
										<th scope="col">&#10003;</th>
										<th scope="col">&#10005;</th>
									</tr>
								</thead>
								<tbody>
									
									{% for aluno_exercicio in aluno_exercicios %}
										<tr>
											<td>{{aluno_exercicio.exercicio_id.tema_id}}</td>
											<td>{{aluno_exercicio.exercicio_id}}</td>
											<td>{{aluno_exercicio.corrects}}</td>
											<td>{{aluno_exercicio.wrongs}}</td>
										</tr>
									{% empty %}
										<tr>
											<td>Nenhum exercício disponível...</td>
										</tr>
									{% endfor %}
							  </tbody>
							</table>
						</div>
						<a href="#" class="btn bg-dark text-white">Praticar</a>
					</div>
				</div>
				{% endif %}

				<form action="{% url 'editar_usuario' %}" style="display:inline-block;">
					<input type="submit" value="Editar usuário" class="btn btn-dark"/>
				</form>
				<form action="{% url 'editar_senha' %}" style="display:inline-block;">
					<input type="submit" value="Editar senha" class="btn btn-dark"/>
				</form>
			{% endblock %}
		</div>
	</div>
</div>
{% endblock %}